import{u as x,r as d,a as C,c as R,o as S,b as s,w as a,d as l,e as B,f as L,g,t as i,h as w}from"./index-BEEL7eZv.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"login-container"},q={class:"card-header"},K={__name:"Login",setup(D){const v=B(),c=x(),t=d(!0),u=d(!1),m=d(),e=C({username:"",password:""}),y={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:50,message:"用户名长度在 3 到 50 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 个字符",trigger:"blur"}]},p=async()=>{await m.value.validate(async _=>{if(_){u.value=!0;try{t.value?await c.login(e.username,e.password)&&v.push("/"):await c.register(e.username,e.password)&&(t.value=!0,e.password="")}finally{u.value=!1}}})};return(_,o)=>{const f=l("el-input"),r=l("el-form-item"),b=l("el-button"),h=l("el-link"),V=l("el-form"),k=l("el-card");return S(),R("div",U,[s(k,{class:"login-card"},{header:a(()=>[w("div",q,[w("h2",null,i(t.value?"登录":"注册")+" - OCR翻译系统",1)])]),default:a(()=>[s(V,{model:e,rules:y,ref_key:"formRef",ref:m,"label-width":"80px"},{default:a(()=>[s(r,{label:"用户名",prop:"username"},{default:a(()=>[s(f,{modelValue:e.username,"onUpdate:modelValue":o[0]||(o[0]=n=>e.username=n),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),s(r,{label:"密码",prop:"password"},{default:a(()=>[s(f,{modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=n=>e.password=n),type:"password",placeholder:"请输入密码","show-password":"",onKeyup:L(p,["enter"])},null,8,["modelValue"])]),_:1}),s(r,null,{default:a(()=>[s(b,{type:"primary",onClick:p,loading:u.value,style:{width:"100%"}},{default:a(()=>[g(i(t.value?"登录":"注册"),1)]),_:1},8,["loading"])]),_:1}),s(r,null,{default:a(()=>[s(h,{type:"primary",onClick:o[2]||(o[2]=n=>t.value=!t.value)},{default:a(()=>[g(i(t.value?"没有账号？立即注册":"已有账号？立即登录"),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},O=N(K,[["__scopeId","data-v-1be1b00d"]]);export{O as default};
