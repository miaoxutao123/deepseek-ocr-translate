import{u as y,r as k,a as v,s as w,k as C,o as A,w as o,d as i,b as l,g as p,h as I}from"./index-BEEL7eZv.js";const x={__name:"Settings",setup(P){const d=y(),r=k(!1),a=v({ocr_api_base:"",ocr_api_key:"",ocr_model:"deepseek-ai/deepseek-vl2",translate_api_base:"",translate_api_key:"",translate_model:"gpt-4o-mini",embedding_api_base:"https://generativelanguage.googleapis.com/v1beta",embedding_api_key:""}),_=async()=>{await d.fetchApiConfig(),d.apiConfig&&(a.ocr_api_base=d.apiConfig.ocr_api_base||"",a.ocr_model=d.apiConfig.ocr_model||"deepseek-ai/deepseek-vl2",a.translate_api_base=d.apiConfig.translate_api_base||"",a.translate_model=d.apiConfig.translate_model||"gpt-4o-mini",a.embedding_api_base=d.apiConfig.embedding_api_base||"")},f=async()=>{r.value=!0;try{await d.saveApiConfig(a)}finally{r.value=!1}};return w(()=>{_()}),(c,e)=>{const b=i("el-alert"),m=i("el-divider"),s=i("el-input"),n=i("el-form-item"),u=i("el-button"),g=i("el-form"),V=i("el-card");return A(),C(V,null,{header:o(()=>[...e[8]||(e[8]=[I("h3",null,"API配置",-1)])]),default:o(()=>[l(b,{title:"安全提示",type:"info",closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},{default:o(()=>[...e[9]||(e[9]=[p(" API密钥会被加密存储在服务器端，但请妥善保管，不要泄露给他人 ",-1)])]),_:1}),l(g,{model:a,"label-width":"150px"},{default:o(()=>[l(m,{"content-position":"left"},{default:o(()=>[...e[10]||(e[10]=[p("OCR配置",-1)])]),_:1}),l(n,{label:"OCR API Base"},{default:o(()=>[l(s,{modelValue:a.ocr_api_base,"onUpdate:modelValue":e[0]||(e[0]=t=>a.ocr_api_base=t),placeholder:"https://api.siliconflow.cn/v1"},null,8,["modelValue"])]),_:1}),l(n,{label:"OCR API Key"},{default:o(()=>[l(s,{modelValue:a.ocr_api_key,"onUpdate:modelValue":e[1]||(e[1]=t=>a.ocr_api_key=t),type:"password","show-password":"",placeholder:"输入硅基流动API密钥"},null,8,["modelValue"])]),_:1}),l(n,{label:"OCR Model"},{default:o(()=>[l(s,{modelValue:a.ocr_model,"onUpdate:modelValue":e[2]||(e[2]=t=>a.ocr_model=t),placeholder:"deepseek-ai/deepseek-vl2"},null,8,["modelValue"])]),_:1}),l(m,{"content-position":"left"},{default:o(()=>[...e[11]||(e[11]=[p("翻译配置",-1)])]),_:1}),l(n,{label:"翻译 API Base"},{default:o(()=>[l(s,{modelValue:a.translate_api_base,"onUpdate:modelValue":e[3]||(e[3]=t=>a.translate_api_base=t),placeholder:"https://api.openai.com/v1"},null,8,["modelValue"])]),_:1}),l(n,{label:"翻译 API Key"},{default:o(()=>[l(s,{modelValue:a.translate_api_key,"onUpdate:modelValue":e[4]||(e[4]=t=>a.translate_api_key=t),type:"password","show-password":"",placeholder:"输入OpenAI API密钥"},null,8,["modelValue"])]),_:1}),l(n,{label:"翻译 Model"},{default:o(()=>[l(s,{modelValue:a.translate_model,"onUpdate:modelValue":e[5]||(e[5]=t=>a.translate_model=t),placeholder:"gpt-4o-mini"},null,8,["modelValue"])]),_:1}),l(m,{"content-position":"left"},{default:o(()=>[...e[12]||(e[12]=[p("向量嵌入配置",-1)])]),_:1}),l(n,{label:"Embedding API Base"},{default:o(()=>[l(s,{modelValue:a.embedding_api_base,"onUpdate:modelValue":e[6]||(e[6]=t=>a.embedding_api_base=t),placeholder:"https://generativelanguage.googleapis.com/v1beta"},null,8,["modelValue"])]),_:1}),l(n,{label:"Embedding API Key"},{default:o(()=>[l(s,{modelValue:a.embedding_api_key,"onUpdate:modelValue":e[7]||(e[7]=t=>a.embedding_api_key=t),type:"password","show-password":"",placeholder:"输入Gemini API密钥"},null,8,["modelValue"])]),_:1}),l(n,null,{default:o(()=>[l(u,{type:"primary",onClick:f,loading:r.value},{default:o(()=>[...e[13]||(e[13]=[p(" 保存配置 ",-1)])]),_:1},8,["loading"]),l(u,{onClick:_},{default:o(()=>[...e[14]||(e[14]=[p(" 重新加载 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}};export{x as default};
